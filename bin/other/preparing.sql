CREATE DATABASE IF NOT EXISTS DACS1_Data;

USE DACS1_Data;

CREATE TABLE IF NOT EXISTS Users(
	User_Id INT NOT NULL AUTO_INCREMENT,
	Name VARCHAR(1000),
	Birth DATE,
	Email VARCHAR(1000),
	Phone VARCHAR(20),
	Address VARCHAR(1000),
	Password VARCHAR(100),
	Avatar LONGBLOB,
	
	PRIMARY KEY (User_Id)
);
ALTER TABLE Users AUTO_INCREMENT=1001;


CREATE TABLE IF NOT EXISTS Chat2P(
	Chat2P_Id INT NOT NULL AUTO_INCREMENT,
	History LONGTEXT,
	Timing DATETIME,
	
	PRIMARY KEY (Chat2P_Id)
);
ALTER TABLE Chat2P AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS Chat2P_Contact(
	Chat2P_Contact_Id INT NOT NULL AUTO_INCREMENT,
	User_Id INT,
	Chat2P_Id INT,
	
	PRIMARY KEY (Chat2P_Contact_Id),
	FOREIGN KEY (User_Id) REFERENCES Users(User_Id),
	FOREIGN KEY (Chat2P_Id) REFERENCES Chat2P(Chat2P_Id)
);
ALTER TABLE Chat2P_Contact AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS ChatGroup(
	ChatGroup_Id INT NOT NULL AUTO_INCREMENT,
	History LONGTEXT,
	Timing DATETIME,

	PRIMARY KEY (ChatGroup_Id)
);
ALTER TABLE ChatGroup AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS ChatGroup_Contact(
	ChatGroup_Contact_Id INT NOT NULL AUTO_INCREMENT,
	User_Id INT,
	ChatGroup_Id INT,
	
	PRIMARY KEY (ChatGroup_Contact_Id),
	FOREIGN KEY (User_Id) REFERENCES Users(User_Id),
	FOREIGN KEY (ChatGroup_Id) REFERENCES ChatGroup(ChatGroup_Id)
);
ALTER TABLE ChatGroup_Contact AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS Community(
	Project_Id INT NOT NULL AUTO_INCREMENT,
	ProjectName VARCHAR(1000),
	
	PRIMARY KEY (Project_Id)
);
ALTER TABLE Community AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS Community_Contact(
	Community_Id INT NOT NULL AUTO_INCREMENT,
	Project_Id INT,
	User_Id INT,
	
	PRIMARY KEY (Community_Id),
	FOREIGN KEY (Project_Id) REFERENCES Community(Project_Id),
	FOREIGN KEY (User_Id) REFERENCES Users(User_Id)
);
ALTER TABLE Community_Contact AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS Post(
	Post_Id INT NOT NULL AUTO_INCREMENT,
	Project_Id INT,
	User_Id INT,
	Timing DATETIME,
	Content LONGTEXT,
	Comment VARCHAR(1000),
	
	PRIMARY KEY (Post_Id),
	FOREIGN KEY (Project_Id) REFERENCES Community(Project_Id),
	FOREIGN KEY (User_Id) REFERENCES Users(User_Id)
);
ALTER TABLE Post AUTO_INCREMENT=101;


CREATE TABLE IF NOT EXISTS Calendar(
	Calendar_Id INT NOT NULL AUTO_INCREMENT,
	User_Id INT,
	
	PRIMARY KEY (Calendar_Id),
	FOREIGN KEY (User_Id) REFERENCES Users(User_Id)
);
ALTER TABLE Calendar AUTO_INCREMENT=101;
